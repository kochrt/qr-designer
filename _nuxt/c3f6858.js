(window.webpackJsonp=window.webpackJsonp||[]).push([[50,36,86],{413:function(t,e,n){var content=n(505);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(65).default)("670b2726",content,!0,{sourceMap:!1})},476:function(t,e,n){var content=n(533);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(65).default)("f61cf12c",content,!0,{sourceMap:!1})},504:function(t,e,n){"use strict";n(413)},505:function(t,e,n){var o=n(64)((function(i){return i[1]}));o.push([t.i,'.font-picker .dropdown-button{\n  height:35px;\n  width:100%;\n  display:flex;\n  align-items:center;\n  justify-content:space-between;\n  padding:0 10px;\n  background:#cbcbcb\n}\n.font-picker .dropdown-button.expanded,.font-picker .dropdown-button:focus,.font-picker .dropdown-button:hover{\n  background:#bebebe\n}\n.font-picker .dropdown-button .dropdown-font-name{\n  overflow:hidden;\n  white-space:nowrap\n}\n.font-picker .dropdown-button.expanded .dropdown-icon.finished:before{\n  transform:rotate(-180deg)\n}\n.font-picker .dropdown-icon{\n  margin-left:10px\n}\n.font-picker .dropdown-icon.loading:before{\n  content:"";\n  display:block;\n  height:10px;\n  width:10px;\n  border-radius:50%;\n  border:2px solid #b2b2b2;\n  border-top-color:#000;\n  -webkit-animation:spinner .6s linear infinite;\n  animation:spinner .6s linear infinite\n}\n.font-picker .dropdown-icon.finished:before{\n  content:"";\n  display:block;\n  height:0;\n  width:0;\n  border-left:5px solid transparent;\n  border-right:5px solid transparent;\n  border-top:6px solid #000;\n  transition:transform .3s;\n  margin:0 2px\n}\n.font-picker .dropdown-icon.error:before{\n  content:"âš "\n}\n.font-picker ul{\n  position:absolute;\n  z-index:1;\n  max-height:0;\n  width:100%;\n  overflow-x:hidden;\n  overflow-y:auto;\n  -webkit-overflow-scrolling:touch;\n  margin:0;\n  padding:0;\n  background:#eaeaea;\n  transition:.3s\n}\n.font-picker ul.expanded{\n  max-height:200px\n}\n.font-picker ul li{\n  height:35px;\n  list-style:none\n}\n.font-picker ul li button{\n  height:100%;\n  width:100%;\n  display:flex;\n  align-items:center;\n  padding:0 10px;\n  white-space:nowrap\n}\n.font-picker ul li button:focus,.font-picker ul li button:hover{\n  background:#ddd\n}\n.font-picker ul li button.active-font{\n  background:#d1d1d1\n}\n@-webkit-keyframes spinner{\nto{\n    transform:rotate(1turn)\n}\n}\n@keyframes spinner{\nto{\n    transform:rotate(1turn)\n}\n}',""]),o.locals={},t.exports=o},529:function(t,e,n){"use strict";n.r(e);var o={},r=n(75),component=Object(r.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flex items-center"},[n("button",{staticClass:"text-gray-600 hover:text-gray-900 transition",attrs:{title:"Bold"},on:{click:function(e){return t.$emit("bold")}}},[n("svg",{staticClass:"h-6 w-6",attrs:{focusable:"false",viewBox:"0 0 24 24","aria-hidden":"true",fill:"currentColor"}},[n("path",{attrs:{d:"M15.6 10.79c.97-.67 1.65-1.77 1.65-2.79 0-2.26-1.75-4-4-4H7v14h7.04c2.09 0 3.71-1.7 3.71-3.79 0-1.52-.86-2.82-2.15-3.42zM10 6.5h3c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-3v-3zm3.5 9H10v-3h3.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5z"}})])]),t._v(" "),n("button",{staticClass:"text-gray-600 hover:text-gray-900 transition",attrs:{title:"Italic"},on:{click:function(e){return t.$emit("italic")}}},[n("svg",{staticClass:"h-6 w-6",attrs:{focusable:"false",viewBox:"0 0 24 24","aria-hidden":"true",fill:"currentColor"}},[n("path",{attrs:{d:"M10 4v3h2.21l-3.42 8H6v3h8v-3h-2.21l3.42-8H18V4z"}})])]),t._v(" "),n("button",{staticClass:"text-gray-600 hover:text-gray-900 transition",attrs:{title:"Underline"},on:{click:function(e){return t.$emit("underline")}}},[n("svg",{staticClass:"h-6 w-6",attrs:{focusable:"false",viewBox:"0 0 24 24","aria-hidden":"true",fill:"currentColor"}},[n("path",{attrs:{d:"M12 17c3.31 0 6-2.69 6-6V3h-2.5v8c0 1.93-1.57 3.5-3.5 3.5S8.5 12.93 8.5 11V3H6v8c0 3.31 2.69 6 6 6zm-7 2v2h14v-2H5z"}})])])])}),[],!1,null,null,null);e.default=component.exports},530:function(t,e,n){"use strict";n.r(e);n(21),n(39),n(51);var o=n(515),r={props:["activeFont","apiKey","options","collapse"],data:function(){return{blockFonts:[],state:{activeFont:this.activeFont,errorText:"",expanded:!1,loadingStatus:"loading"},pickerSuffix:"",fontManager:null}},mounted:function(){var t=this;this.options&&this.options.name?this.pickerSuffix="-".concat(this.options.name):this.pickerSuffix="",this.fontManager=new o.a(this.apiKey,this.activeFont,this.options,(function(e){t.$emit("loaded",e)})),this.fontManager.init().then((function(){t.setState({errorText:"",loadingStatus:"finished"})})).catch((function(e){t.setState({errorText:"Error trying to fetch the list of available fonts",loadingStatus:"error"}),console.error(t.state.errorText),console.error(e)}))},watch:{activeFont:function(){this.state.activeFont!==this.activeFont&&this.setActiveFont(this.activeFont)},collapse:function(t){this.setState({expanded:!t})}},methods:{setState:function(t){this.state=Object.assign(this.state,t)},onClose:function(t){var e=t.target;do{if(e===document.getElementById("font-picker"))return;e=e.parentNode}while(e);this.toggleExpanded()},onScroll:function(t){var e=t.target.scrollHeight/this.fontManager.fonts.length,n=Math.ceil((t.target.scrollTop+t.target.clientHeight)/e);this.fontManager.downloadPreviews(n+5)},setActiveFont:function(t){-1===this.fontManager.setActiveFont(t)?(this.setState({activeFont:t,errorText:'Cannot update activeFont: The font "'.concat(t,'" is not in the font list'),loadingStatus:"error"}),console.error(this.state.errorText)):this.setState({activeFont:t,errorText:"",loadingStatus:"finished"})},toggleExpanded:function(){this.$emit("expanded",!this.state.expanded),this.setState({expanded:!this.state.expanded})},snakeCase:function(text){return text.replace(/\s+/g,"-").toLowerCase()},itemClick:function(t){this.toggleExpanded(),this.$emit("change",t)}}},l=(n(504),n(75)),component=Object(l.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"font-picker",attrs:{id:"font-picker"+t.pickerSuffix,title:t.state.errorText}},[n("button",{staticClass:"dropdown-button",class:{expanded:t.state.expanded},attrs:{type:"button"},on:{click:t.toggleExpanded,keypress:t.toggleExpanded}},[n("p",{staticClass:"dropdown-font-name"},[t._v(t._s(t.state.activeFont))]),t._v(" "),n("p",{staticClass:"dropdown-icon",class:t.state.loadingStatus})]),t._v(" "),n("ul"),t._v(" "),"finished"===t.state.loadingStatus&&t.fontManager.fonts?n("ul",{class:{expanded:t.state.expanded},on:{scroll:t.onScroll}},t._l(t.fontManager.fonts,(function(e){return n("li",{key:e.family},[n("button",{class:"font-"+t.snakeCase(e.family)+t.pickerSuffix+" "+(e.family===t.state.activeFont?"active-font":""),attrs:{type:"button"},on:{click:function(n){return t.itemClick(e)},keypress:function(n){return t.itemClick(e)}}},[t._v("\n        "+t._s(e.family)+"\n      ")])])})),0):t._e()])}),[],!1,null,null,null);e.default=component.exports},532:function(t,e,n){"use strict";n(476)},533:function(t,e,n){var o=n(64)((function(i){return i[1]}));o.push([t.i,"#font-picker{\n  box-shadow:none;\n  position:static\n}\n#font-picker .dropdown-button{\n  height:2rem;\n  background-color:transparent\n}\n#font-picker .dropdown-button:hover{\n  --tw-bg-opacity:1;\n  background-color:rgba(229, 231, 235, var(--tw-bg-opacity))\n}\n#font-picker .dropdown-button{\n  transition-property:background-color, border-color, color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-backdrop-filter;\n  transition-property:background-color, border-color, color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;\n  transition-property:background-color, border-color, color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-backdrop-filter;\n  transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);\n  transition-duration:150ms\n}",""]),o.locals={},t.exports=o},581:function(t,e,n){"use strict";n.r(e);n(30),n(63),n(25),n(16),n(21),n(44),n(22),n(35),n(43),n(46),n(28);var o=n(2),r=n(403),l=n(529),c=n(530),d=n(106);function f(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return h(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,l=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return l=t.done,t},e:function(t){c=!0,r=t},f:function(){try{l||null==n.return||n.return()}finally{if(c)throw r}}}}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var v=o.default.extend({components:{"color-picker":r.Chrome,StyleButtons:l.default,FontPicker:c.default},data:function(){return{apiKey:"AIzaSyDPlj-MkpwSvYtVnMCpQywMqtzNOY3mKtI",activeFont:"Arial",showingFillColorPicker:!1,showingStrokeColorPicker:!1,collapseFontPicker:1}},watch:{showingFillColorPicker:function(t){t&&(this.showingStrokeColorPicker=!1,this.collapseFontPicker++)},showingStrokeColorPicker:function(t){t&&(this.showingFillColorPicker=!1,this.collapseFontPicker++)}},computed:{selectedNodeStyleOptions:function(){return this.$store.getters["design/selectedNodeStyleOptions"]},selectedNodesConfigs:function(){return this.$store.getters["design/".concat(d.GETTER_SELECTED_NODES_CONFIGS)]},canShowFill:function(){return this.selectedNodeStyleOptions&&this.selectedNodeStyleOptions.has("fill")},canShowStroke:function(){return this.selectedNodeStyleOptions&&this.selectedNodeStyleOptions.has("stroke")},canShowFont:function(){return this.selectedNodeStyleOptions&&this.selectedNodeStyleOptions.has("fontFamily")},canShowFontStyle:function(){return this.selectedNodeStyleOptions&&this.selectedNodeStyleOptions.has("fontStyle")},canShowText:function(){return this.selectedNodeStyleOptions&&this.selectedNodeStyleOptions.has("text")},fillColor:function(){return this.getConsensusProp("fill","black")},stroke:function(){return this.getConsensusProp("stroke","black")},strokeWidth:function(){return this.getConsensusProp("strokeWidth",0)},text:function(){return this.getConsensusProp("text","")}},methods:{moveForward:function(){this.$store.dispatch("design/moveForward")},moveBackward:function(){this.$store.dispatch("design/moveBackward")},collapseColorPickers:function(){this.showingFillColorPicker=!1,this.showingStrokeColorPicker=!1},getConsensusProp:function(t,e){var n,o=this.selectedNodesConfigs[0].config[t]||e,r=f(this.selectedNodesConfigs.map((function(t){return t.config})));try{for(r.s();!(n=r.n()).done;){if(n.value[t]!==o)return e}}catch(t){r.e(t)}finally{r.f()}return o},setFill:function(t){this.setConfigProp("fill",t.hex8)},setStrokeWidth:function(t){this.setConfigProp("strokeWidth",parseInt(t.target.value))},setStroke:function(t){this.setConfigProp("stroke",t.hex8)},setConfigProp:function(t,e){this.$store.dispatch("design/setConfigProps",{key:t,value:e}),this.$emit("update")},setFont:function(t){this.activeFont=t.family},fontLoaded:function(t){var e=this;t.family===e.activeFont&&setTimeout((function(){e.setConfigProp("fontFamily",t.family),e.$emit("update")}),200)},styleBold:function(){this.$store.dispatch("design/styleBold"),this.$emit("update")},styleItalic:function(){this.$store.dispatch("design/styleItalic"),this.$emit("update")},styleUnderline:function(){this.$store.dispatch("design/styleUnderline"),this.$emit("update")},updateText:function(input){this.setConfigProp("text",input.target.value)}}}),k=(n(532),n(75)),component=Object(k.a)(v,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"absolute flex flex-col"},[n("div",{staticClass:"\n      p-1\n      flex flex-col\n      hover:opacity-100\n      bg-gray-100\n      transition\n      rounded\n      shadow-lg\n    "},[n("div",{staticClass:"flex flex-row items-center"},[t.canShowFill?n("div",{staticClass:"relative",attrs:{title:"Fill color"}},[n("div",{staticClass:"h-5 w-5 rounded cursor-pointer border border-gray-200",style:"background-color: "+t.fillColor,attrs:{role:"button"},on:{click:function(e){t.showingFillColorPicker=!t.showingFillColorPicker}}}),t._v(" "),t.showingFillColorPicker?n("color-picker",{staticClass:"absolute top-8 left-0",attrs:{value:t.fillColor},on:{input:t.setFill}}):t._e()],1):t._e(),t._v(" "),t.canShowStroke?n("div",{staticClass:"flex ml-1 relative items-center"},[n("div",{staticClass:"flex border border-gray-200 h-5 w-5 rounded items-center",on:{click:function(e){t.showingStrokeColorPicker=!t.showingStrokeColorPicker}}},[n("div",{staticClass:"w-full",style:"background-color: "+t.stroke+"; height: "+(1+t.strokeWidth)+"px"})]),t._v(" "),t.showingStrokeColorPicker?n("color-picker",{staticClass:"absolute top-8 left-0",attrs:{value:t.stroke},on:{input:t.setStroke}}):t._e(),t._v(" "),n("input",{staticClass:"\n            p-1\n            text-xs\n            font-mono\n            text-gray-500\n            ml-2\n            border-none\n            bg-transparent\n            transition\n            hover:text-gray-600\n            focus:text-gray-600\n            appearance-none\n          ",attrs:{type:"number",min:"0",max:"16"},domProps:{value:t.strokeWidth},on:{change:t.setStrokeWidth}})],1):t._e(),t._v(" "),n("div",{staticClass:"flex items-center mx-1"},[n("button",{staticClass:"transition text-gray-600 hover:text-gray-900 mr-1",attrs:{title:"Move forward"},on:{click:t.moveForward}},[n("svg",{staticClass:"w-4 h-4",attrs:{"aria-hidden":"true",focusable:"false",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"}},[n("path",{attrs:{fill:"currentColor",d:"M352 304V48a48 48 0 0 0-48-48H48A48 48 0 0 0 0 48v256a48 48 0 0 0 48 48h256a48 48 0 0 0 48-48zm112-144h-80v64h64v224H224v-64h-64v80a48 48 0 0 0 48 48h256a48 48 0 0 0 48-48V208a48 48 0 0 0-48-48z"}})])]),t._v(" "),n("button",{staticClass:"transition text-gray-600 hover:text-gray-900",attrs:{title:"Move backward"},on:{click:t.moveBackward}},[n("svg",{staticClass:"w-4 h-4",attrs:{"aria-hidden":"true",focusable:"false",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"}},[n("path",{attrs:{fill:"currentColor",d:"M464,160H208a48,48,0,0,0-48,48V464a48,48,0,0,0,48,48H464a48,48,0,0,0,48-48h0V208A48,48,0,0,0,464,160ZM448,448H224V224H448ZM352,128V48A48,48,0,0,0,304,0H48A48,48,0,0,0,0,48V304a48,48,0,0,0,48,48h80V208a80.09,80.09,0,0,1,80-80Z"}})])])])]),t._v(" "),n("div",{staticClass:"flex flex-row items-center"},[t.canShowFontStyle?n("div",[n("style-buttons",{on:{bold:t.styleBold,italic:t.styleItalic,underline:t.styleUnderline}})],1):t._e(),t._v(" "),t.canShowFont?n("div",[n("font-picker",{staticClass:"ml-1",attrs:{apiKey:t.apiKey,activeFont:t.activeFont,collapse:t.collapseFontPicker},on:{change:t.setFont,loaded:t.fontLoaded,expanded:t.collapseColorPickers}})],1):t._e(),t._v(" "),t.canShowText?n("div",{staticClass:"ml-1"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],staticClass:"border-none p-1 focus:outline-none w-full",attrs:{id:"textStyleTextInput",type:"text"},domProps:{value:t.text},on:{input:[function(e){e.target.composing||(t.text=e.target.value)},t.updateText]}})]):t._e()])])])}),[],!1,null,null,null);e.default=component.exports}}]);